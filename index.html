<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WFM Horizontal Schedule</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    #intervalSelector {
      margin-bottom: 10px;
    }

    .interval-btn {
      margin-right: 5px;
      padding: 5px 10px;
    }

    .schedule-grid {
      display: flex;
      flex-direction: column;
      overflow-x: auto;
      border: 1px solid #ccc;
      margin-top: 10px;
      font-family: Arial, sans-serif;
    }

    .schedule-time-header,
    .agent-schedule-row {
      display: grid;
      grid-template-columns: 150px repeat(auto-fill, 60px);
    }

    .agent-name-header,
    .agent-name-cell {
      font-weight: bold;
      background: #f1f1f1;
      padding: 4px;
      border-right: 1px solid #ccc;
    }

    .time-interval-header,
    .time-interval-cell {
      text-align: center;
      border-left: 1px solid #eee;
      padding: 4px;
      height: 30px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .activity-block {
      width: 100%;
      height: 100%;
      font-size: 12px;
      font-weight: bold;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .activity-onqueue { background-color: #4A90E2; }
    .activity-break { background-color: #D35400; }
    .activity-lunch { background-color: #F1C40F; color: #000; }
  </style>
</head>
<body>

  <h2>Schedule View</h2>

  <div id="intervalSelector">
    <button class="interval-btn" data-interval="15">15min</button>
    <button class="interval-btn" data-interval="30">30min</button>
    <button class="interval-btn" data-interval="45">45min</button>
    <button class="interval-btn" data-interval="60">60min</button>
    <button class="interval-btn" data-interval="day">Day</button>
  </div>

  <div id="horizontalScheduleGrid" class="schedule-grid"></div>

  <script>
    const horizontalScheduleGrid = document.getElementById('horizontalScheduleGrid');
    const intervalButtons = document.querySelectorAll('.interval-btn');

    const scheduleData = {
      intervalLength: 15,
      currentDay: 0,
      horizontalSchedule: [
        {
          agents: [
            {
              agentId: 1,
              agentName: 'John Thompson',
              activities: [
                '', '', 'onqueue', 'onqueue', 'onqueue', 'onqueue', 'break', '', '', 'onqueue',
                'onqueue', 'lunch', '', '', 'onqueue', '', 'break', '', '', '', 'onqueue'
              ]
            },
            {
              agentId: 2,
              agentName: 'Sasha Smith',
              activities: [
                'onqueue', 'onqueue', 'onqueue', '', '', '', '', '', '', '', '', '', 'onqueue',
                'lunch', 'onqueue', 'onqueue', '', '', '', '', ''
              ]
            }
          ]
        }
      ]
    };

    const activityTypes = [
      { id: 'onqueue', name: 'Inbound', color: 'activity-onqueue' },
      { id: 'break', name: 'Break', color: 'activity-break' },
      { id: 'lunch', name: 'Lunch', color: 'activity-lunch' }
    ];

    function generateHorizontalSchedule() {
      const intervalLength = scheduleData.intervalLength;
      const startHour = 8;
      const endHour = 20;
      const totalMinutes = (endHour - startHour) * 60;
      const intervals = intervalLength === 'day' ? 1 : totalMinutes / intervalLength;

      horizontalScheduleGrid.innerHTML = '';

      const daySchedule = scheduleData.horizontalSchedule[scheduleData.currentDay];
      if (!daySchedule) return;

      const headerRow = document.createElement('div');
      headerRow.className = 'schedule-time-header';

      const agentHeader = document.createElement('div');
      agentHeader.className = 'agent-name-header';
      agentHeader.textContent = 'Agent / Time';
      headerRow.appendChild(agentHeader);

      if (intervalLength === 'day') {
        const col = document.createElement('div');
        col.className = 'time-interval-header';
        col.textContent = 'Full Day';
        headerRow.appendChild(col);
      } else {
        for (let i = 0; i < intervals; i++) {
          const minutes = startHour * 60 + i * intervalLength;
          const hour = Math.floor(minutes / 60);
          const minute = minutes % 60;
          const time = hour.toString().padStart(2, '0') + ':' + minute.toString().padStart(2, '0');
          const col = document.createElement('div');
          col.className = 'time-interval-header';
          col.textContent = time;
          headerRow.appendChild(col);
        }
      }

      horizontalScheduleGrid.appendChild(headerRow);

      const sortedAgents = [...daySchedule.agents];
      sortedAgents.sort((a, b) => a.agentName.localeCompare(b.agentName));

      sortedAgents.forEach(agent => {
        const row = document.createElement('div');
        row.className = 'agent-schedule-row';

        const nameCell = document.createElement('div');
        nameCell.className = 'agent-name-cell';
        nameCell.textContent = agent.agentName;
        row.appendChild(nameCell);

        if (intervalLength === 'day') {
          const cell = document.createElement('div');
          cell.className = 'time-interval-cell';
          const acts = [...new Set(agent.activities.filter(Boolean))];
          acts.forEach(act => {
            const type = activityTypes.find(a => a.id === act);
            if (type) {
              const block = document.createElement('div');
              block.className = 'activity-block ' + type.color;
              block.style.marginBottom = '2px';
              block.textContent = type.name;
              block.title = type.name + ' activity';
              cell.appendChild(block);
            }
          });
          row.appendChild(cell);
        } else {
          for (let i = 0; i < intervals; i++) {
            const cell = document.createElement('div');
            cell.className = 'time-interval-cell';
            const minutes = startHour * 60 + i * intervalLength;
            const intervalIndex = Math.floor(minutes / scheduleData.intervalLength);
            const act = agent.activities[intervalIndex];
            if (act) {
              const type = activityTypes.find(a => a.id === act);
              if (type) {
                const block = document.createElement('div');
                block.className = 'activity-block ' + type.color;
                block.textContent = type.name[0];
                block.title = type.name + ' @ ' + hour + ':' + minute;
                cell.appendChild(block);
              }
            }
            row.appendChild(cell);
          }
        }

        horizontalScheduleGrid.appendChild(row);
      });
    }

    intervalButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const val = btn.dataset.interval;
        scheduleData.intervalLength = val === 'day' ? 'day' : parseInt(val);
        generateHorizontalSchedule();
      });
    });

    generateHorizontalSchedule();
  </script>

</body>
</html>
